# Module Example

## File Structure
>
>‚†Ä„Ä∞Ô∏è üìÅ `/modules`
>
>‚†Ä‚†Ä‚†Ä‚†Ä„Ä∞Ô∏è üìÅ`/<name>`
>
>‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä„Ä∞Ô∏è üìÅ`/languages`
>
>‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ÄüìÑ `<code>.po`‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä<sub><i>(For example `en_US.po`)</i></sub>
>
>‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä„Ä∞Ô∏è üìÅ`/setup`
>
>‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ÄüìÑ `install.php`
>
>‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ÄüìÑ `deinstall.php`
>
>‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ÄüìÑ `check.php`
>
>‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ÄüìÑ `module.package`
>
>‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ÄüìÑ `daemon.php`
>
>‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ÄüìÑ `module.php`
>
>‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ÄüìÑ `CHANGELOG.md`‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä <sub><i>`Optional`</i></sub>
>
>‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ÄüìÑ `README.md`‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä<sub><i>`Optional`</i></sub>

## `module.package`
```json
{
	"name":			"ExampleModule",
	"version":		"1.0.0",
	"category":		<NavigationCategory>,
	"icon":			<NavigationIcon>,
	"order":		<NavigationOrder>,
	"permissions":		<Permissions>,
	"description":	"This is an description.",
	"author":		{
		"name":		"Your Name",
		"email":	<email>,
		"url":		<url>
	},
	"repository":	<github-url>,
	"screenshots": [
		{
			"file": <image>
			"description": "Screenshost description"
		}
	]
}
```

### Possible Values

| | | |
|-|-|-|
| `<NavigationCategory>` | `string` | Possible values: `ACCOUNT_MANAGEMENT`, `DATABASE_MANAGEMENT`, `DOMAIN_MANAGEMENT`, `MAIL_MANAGEMENT`, `FTP_MANAGEMENT`, `HOSTING_MANAGEMENT`, `EXTENDED_MANAGEMENT`, `SUPPORT_MANAGEMENT`, `ADMIN_MANAGEMENT`, `SERVER_MANAGEMENT` |
| `<NavigationIcon>` | `string` | A `name` of an [Material Icon](https://fonts.google.com/icons?icon.set=Material+Icons) |
| `<NavigationOrder>` | `int` | The position of the module in the navigation |
| `<Permissions>` | `array` | A list of [Permissions](https://github.com/fruithost/Documentation/blob/main/System/Permissions.md) that are allowed to see the module. |

## `module.php`

```php
<?php
	use fruithost\ModuleInterface;

	class ExampleModule extends ModuleInterface {
		/* System Callbacks */
			public function init() : void {
				/*
	                		Is called up when the module is initialized by the module manager.
	
	               			Not all methods are available at this point and there is no guarantee that another module is already accessible here.
	            		*/
			}
			
	        	public function preLoad() : void {
				/*
	                		Is called up shortly before the module is actively used.
	            		*/
			}
	
			public function load() : void {
				/*
	                		Is called up as soon as the module is actively used (for example by calling it up via the menu).
	            		*/
			}

		/* Displaying Contents */
			public function frame() : ?string {
				/*
	                		The URL of an Frame of the module that is displayed in the UI.
					For a simple sample: If you want to display external Services like PHPMyAdmin or a Webmailer on the Panel.
	            		*/
	
				return 'https://example.com/phpmyadmin';
			}
			
			public function content() {
				/*
	                		The content of the module that is displayed/output in the UI.
	            		*/
			}

		/* Handling Requests or Data */
			public function onPOST($data = []) : void {
				/*
	                		This is called when a POST request is fired on the module page.
	           		*/
			}
	}
?>
```

## `setup/install.php` & `setup/deinstall.php`
A PHP file that is used/called as soon as the module is installed or uninstalled by the system administrator. Database operations can be carried out here, for example.

> [!NOTE]
> Currently, these files are executed with the rights of the `webserver` with `www-data`-user. If you want to execute these scripts with extended rights (`root`), take a look at [Module Permissions](Module%20Permissions.md).

To install the module, enter the following command via Shell:
> fruithost install <name>

To uninstall the module, enter the following command via Shell:
> fruithost deinstall <name>

A module can be activated with the following command:
> fruithost enable <name>

or deactivated:
> fruithost disable <name>

## `setup/check.php`
Since Panel-Version `1.0.3`, modules can have a self-check. For this purpose, module-related tests are carried out in `setup/check.php`. If no output is generated by the checks, the module has been checked correctly. If the self-check is to generate errors, only output must be generated.

Sample Check:
```php
<?php
	use fruithost\Storage\Database;
	
	if(!Database::tableExists(DATABASE_PREFIX . 'certificates')) {
		print('Table <strong>certificates</strong> not exists!');
	}
?>
```

![CHECK]

## `daemon.php`
This file is called up by the [Daemon](https://github.com/fruithost/Binary) every minute. Batch processing that does not take place in the user's UI can take place here, for example.

> [!NOTE]
> Currently, these files are executed with the rights of the `webserver` with `www-data`-user. If you want to execute these scripts with extended rights (`root`), take a look at [Module Permissions](Module%20Permissions.md).

[CHECK]: https://github.com/fruithost/Documentation/blob/main/Images/Modules/CHECK.PNG?raw=true
